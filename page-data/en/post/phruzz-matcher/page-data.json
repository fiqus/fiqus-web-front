{
    "componentChunkName": "component---src-blog-templates-blog-post-js",
    "path": "/en/post/phruzz-matcher",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"2e083a5d-7018-5489-9a4b-3f397c03535f","html":"<h1>PhruzzMatcher</h1>\n<h2>TL;DR</h2>\n<p>How to detect phrases that don't necessarily match a list of values they should match? Spacy, RapidFuzz, NER and other weeds all mixed together.</p>\n<h2>How did we get here?</h2>\n<p>In the last time we have been working intercooperatively in IA² [0] , an open source software that integrates a set of tools developed to facilitate transparency in institutions and strengthen the link with citizens through the anonymization of court judgments and the extraction of data obtained through NER (Named Entity Recognition).\nPartly because of the experience that this project offered us and because of the links we made, we also worked with CIECTI [1] (Interdisciplinary Center for Studies in Science, Technology and Innovation) on a prototype for anonymization of EHR (Electronic Health Records).</p>\n<h2>¡Now we are ready!</h2>\n<p>And it is about this project that I wanted to talk to you! (but a brief introduction was needed)\nAmong the requirements of this prototype we had to develop was the need to detect EPoF (Rare Diseases). These diseases are registered nationally here [2], so one approach to their detection was to put together a list of EPoF and see which of them appeared in the texts to be anonymized.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/06341/phruzz-matcher-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQY06WOW2+CMACF+f+/RX3C1Vsyt0QyKeLmWlrWkiAmhUCAUmJWXoqSJV6edx7O0/lyPqtsu1x1zVnnSmdSF0oX6rdQum3PVVU2jazKsqprKWX90MaYvu+t/h+5w0Kkvu+7rotxEFIaBARj7DjON0KHwxf0oL/fe96OUgohZIwZYwb4z+F1vQazmW1Pl4s5AGCzcd7fhrwAsFotJ5PxaDTefmyT5Mg4T0X6BJ9OCeOcEPoThoSQKIoizoVIP4dDL45jhFCWZbf9VfsCJFUOdbFs/lAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/e922d/phruzz-matcher-01.webp 375w,\n/static/0def03b7c7ed593dbe9b9cd7e50d273e/2bf0f/phruzz-matcher-01.webp 512w\"\n              sizes=\"(max-width: 512px) 100vw, 512px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/ae393/phruzz-matcher-01.png 375w,\n/static/0def03b7c7ed593dbe9b9cd7e50d273e/06341/phruzz-matcher-01.png 512w\"\n            sizes=\"(max-width: 512px) 100vw, 512px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/06341/phruzz-matcher-01.png\"\n            alt=\"epofs\"\n            title=\"epofs\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">epofs</figcaption>\n  </figure></p>\n<p>After a bit of scraping [3], we generated a csv file with these diseases. Now we had to find out which component Spacy [4] offered us to detect them.\nIt is worth clarifying that both in IA² and in this prototype for CIECTI, we used Spacy for its capacity in the development of models for production, the performance it offers, the robustness and the freedoms offered by its Open Source quality.\nThe pre-trained models offered by SpaCy offer a reasonable cost/benefit ratio, understanding cost as computational cost of training models and benefit as model prediction accuracy.\nHaving said that, in our search for a component, we found that the one that came closest was the PhraseMatcher [5]. This Spacy component allows you to efficiently match large lists of terminology; it accepts matching patterns in the form of Doc objects [6].\nThe problem is that it is only useful if what you are looking for (an EPoF in this case) appears exactly as it was written in the text, i.e., there can be nothing different (much less a typo or an abbreviation that was not considered in the EPoF listing).\nHave you ever seen health care personnel typing a medical record? Maybe not directly, but surely you were in front of a person typing fast on a computer and at the same time asking questions, which raises suspicions about the existence of typing errors, abbreviations and who knows how many other peculiarities in what they wrote.\nThat is why it is necessary to incorporate \"something\" that allows some flexibility about what you are looking for, after looking for alternatives... [7]</p>\n<h2>Houston we have a problem, or not!</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/06341/phruzz-matcher-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.400000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVQI12XFwWrCMACA4T6iu+w51GpXkFIpePCkBw+CMNh5eBjsMHCCOPYKggfbaJo0JinUzCaWmCgKnvbBz+88P9XaLXfx9f4xfRvNJ+Pla/9zFk1/xoPvXm8YdLtBGHWCMAgjz+80XK/Z8pttv+56DffFWf3OwHolZHUQf8fiqJW2VXXRlTans9HWGGvM5R+tz9ZaR6kTZyxJku0WxCDeJHEMANjt0hQjhCGEKYSEZDznjPGc5zjDKUIYYSGEI5UqDgXZ7ymlGSGUUsZulWWp7qSSd489SCmvJLTIm0eMkwgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/e922d/phruzz-matcher-02.webp 375w,\n/static/ecab26bd03a6c2fbc6d907cfb4e8b563/2bf0f/phruzz-matcher-02.webp 512w\"\n              sizes=\"(max-width: 512px) 100vw, 512px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/ae393/phruzz-matcher-02.png 375w,\n/static/ecab26bd03a6c2fbc6d907cfb4e8b563/06341/phruzz-matcher-02.png 512w\"\n            sizes=\"(max-width: 512px) 100vw, 512px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/06341/phruzz-matcher-02.png\"\n            alt=\"issue-spacy\"\n            title=\"issue-spacy\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">issue-spacy</figcaption>\n  </figure></p>\n<p>Fortunately the problem quickly disappeared, RapidFuzz appeared! [8] A fast string-matching library. It uses the Levenshtein distance [9] to calculate the differences between sequences in a simple way and is faster than its direct competitor FuzzyWuzzy [10] (see benchmark [11]).\nWhereas EPoFs are taken from a csv file that was generated from information found on the internet, but does not consider the various ways in which people may refer to them.\nFinally, this library was added to be able to detect cases in which there is not a perfect match between tokens [12] and diseases in the EPoF list.\nBut not everything is so simple or perfect, the way to evaluate the coincidence is by comparing the \"distance\" that separates the EPoF and the fragment of the EHR analyzed with a percentage of \"flexibility / tolerance\" configured by us.\nThe lower the value of this tolerance percentage is configured, the higher the tolerance of the component to detect EPoF; we must be aware that a too low value may cause many possible matches to be found, resulting in overprocessing to identify such diseases.\nThe code implementing the above was extracted to a separate component so that it could be used by whoever needs it (see the component's Github [13] and the component in Pypi [14]), as well as to be published in the Spacy universe [15].</p>\n<h2>Conclusions</h2>\n<p>Both Spacy's PhraseMatcher and RapidFuzz are very useful but must be accompanied with a proper analysis aligned with the established objectives. A wrong use of these components could lead to the generation of a large number of \"false positives\" (detections of entities where in fact there is no entity).\nThis may not be a problem, as long as it does not impair the reading of a clinical history or make it impossible to understand what it is trying to convey.\nWe suggest analyzing the way people write in order to enrich the EPoF list, as well as any other elements of the code that have been created based on the texts that could be analyzed (for example, we found that they wrote \"tto\" to refer to \"treatment\").\nThe prototype code made for CIECTI can be found on the project's GitHub [16].</p>\n<h2>Sources and references</h2>\n<p>0: <a href=\"https://www.ia2.coop/\">IA²</a><br/>\n1: <a href=\"http://www.ciecti.org.ar/\">CIECTI | Centro Interdisciplinario de Estudios en Ciencia, Tecnología e Innovación</a><br/>\n2: <a href=\"https://www.argentina.gob.ar/salud/pocofrecuentes/listado\">Listado de enfermedades poco frecuentes en Argentina</a><br/>\n3: <a href=\"https://es.wikipedia.org/wiki/Web_scraping\">Web scraping</a><br/>\n4: <a href=\"https://spacy.io/usage/processing-pipelines\">Language Processing Pipelines · spaCy Usage Documentation</a><br/>\n5: <a href=\"https://spacy.io/api/phrasematcher\">PhraseMatcher · spaCy API Documentation</a><br/>\n6: <a href=\"https://spacy.io/api/doc\">Doc · spaCy API Documentation</a><br/>\n7: <a href=\"https://support.prodi.gy/t/fuzzy-partial-matching-with-phrasematcher-ner-task/1084/8\">Fuzzy (partial) matching with PhraseMatcher (NER task) - usage</a><br/>\n8: <a href=\"https://github.com/maxbachmann/RapidFuzz\">https://github.com/maxbachmann/RapidFuzz</a><br/>\n9: <a href=\"https://es.wikipedia.org/wiki/Distancia_de_Levenshtein\">Distancia de Levenshtein</a><br/>\n10: <a href=\"https://github.com/seatgeek/fuzzywuzzy\">https://github.com/seatgeek/fuzzywuzzy</a><br/>\n11: <a href=\"https://github.com/maxbachmann/RapidFuzz#benchmark\">maxbachmann/RapidFuzz: Rapid fuzzy string matching in Python using various string metrics</a><br/>\n12: A token is an instance of a sequence of characters in some particular document that is grouped together as a semantic unit useful for processing. So by \"token\" we mean a word, punctuation mark, space, etc.<br/>\n13: <a href=\"https://github.com/mjvallone/phruzz-matcher\">https://github.com/mjvallone/phruzz-matcher</a><br/>\n14: <a href=\"https://pypi.org/project/phruzz-matcher/\">https://pypi.org/project/phruzz-matcher/</a><br/>\n15: <a href=\"https://spacy.io/universe/project/phruzz_matcher\">https://spacy.io/universe/project/phruzz_matcher</a><br/>\n16: <a href=\"https://github.com/instituciones-abiertas/anonimizacion-texto-libre\">https://github.com/instituciones-abiertas/anonimizacion-texto-libre</a><br/></p>","frontmatter":{"lang":"en","type":"post","title":"PhruzzMatcher","author":"Martín Vallone","slug":"/phruzz-matcher","date":"2021-10-05","tags":["spacy","nlp","ner"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABxoc4EBL/xAAXEAEBAQEAAAAAAAAAAAAAAAAAARBB/9oACAEBAAEFAuLkV//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAAAARAxESFB/9oACAEBAAE/IcbHVB0y0P/aAAwDAQACAAMAAAAQo+//xAAXEQADAQAAAAAAAAAAAAAAAAAAASEx/9oACAEDAQE/EEgsP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ECf/xAAdEAACAgEFAAAAAAAAAAAAAAAAARFxITFBUWGx/9oACAEBAAE/EIS1AtrgVpqhsdeDNQ6RqVH/2Q==","aspectRatio":1.5037593984962405,"src":"/static/0e5d05dfa990a81fcb36d03f74a777ba/14b42/matrix-header.jpg","srcSet":"/static/0e5d05dfa990a81fcb36d03f74a777ba/f836f/matrix-header.jpg 200w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/2244e/matrix-header.jpg 400w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/14b42/matrix-header.jpg 800w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/47498/matrix-header.jpg 1200w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/0e329/matrix-header.jpg 1600w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/c128d/matrix-header.jpg 5760w","sizes":"(max-width: 800px) 100vw, 800px"}}},"imageCredits":"unsplash"},"timeToRead":5}},{"node":{"id":"ff656bcf-7441-5829-9b39-00427b817b44","html":"<h1>PhruzzMatcher</h1>\n<h2>TL;DR</h2>\n<p>Cómo detectar frases que no necesariamente coinciden con una lista de valores con los que deberían coincidir? Spacy, RapidFuzz, NER y otras yerbas todas mezcladas.</p>\n<h2>¿Cómo llegamos a aquí?</h2>\n<p>En el último tiempo hemos estado trabajando intercooperativamente en IA² [0], un software de código abierto que integra un conjunto de herramientas desarrolladas para facilitar la transparencia en instituciones y fortalecer la vinculación con la ciudadanía mediante la anonimización de sentencias judiciales y la extracción de datos obtenidos mediante NER (Reconocimiento de Entidades Nombradas).\nEn parte por la experiencia que nos ofreció dicho proyecto y por las vinculaciones que fuimos haciendo, también trabajamos con el CIECTI [1] (Centro Interdisciplinario de Estudios en Ciencia, Tecnología e Innovación) en un prototipo para anonimización de HCE (Historias Clínicas Electrónicas).</p>\n<h2>¡Ahora si!</h2>\n<p>Y es de este proyecto que quería hablarles! (pero hacía falta una breve introducción)\nDentro de los requerimientos de este prototipo que teníamos que desarrollar estaba la necesidad de detectar EPoF (Enfermedades Poco Frecuentes). Dichas enfermedades están registradas a nivel nacional aquí [2], por lo que un acercamiento a su detección era armar una lista de EPoF y ver cuáles de ellas aparecían en los textos que se iban a anonimizar.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/06341/phruzz-matcher-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQY06WOW2+CMACF+f+/RX3C1Vsyt0QyKeLmWlrWkiAmhUCAUmJWXoqSJV6edx7O0/lyPqtsu1x1zVnnSmdSF0oX6rdQum3PVVU2jazKsqprKWX90MaYvu+t/h+5w0Kkvu+7rotxEFIaBARj7DjON0KHwxf0oL/fe96OUgohZIwZYwb4z+F1vQazmW1Pl4s5AGCzcd7fhrwAsFotJ5PxaDTefmyT5Mg4T0X6BJ9OCeOcEPoThoSQKIoizoVIP4dDL45jhFCWZbf9VfsCJFUOdbFs/lAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/e922d/phruzz-matcher-01.webp 375w,\n/static/0def03b7c7ed593dbe9b9cd7e50d273e/2bf0f/phruzz-matcher-01.webp 512w\"\n              sizes=\"(max-width: 512px) 100vw, 512px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/ae393/phruzz-matcher-01.png 375w,\n/static/0def03b7c7ed593dbe9b9cd7e50d273e/06341/phruzz-matcher-01.png 512w\"\n            sizes=\"(max-width: 512px) 100vw, 512px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0def03b7c7ed593dbe9b9cd7e50d273e/06341/phruzz-matcher-01.png\"\n            alt=\"epofs\"\n            title=\"epofs\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">epofs</figcaption>\n  </figure></p>\n<p>Luego de un poco de scrapping [3], generamos un archivo csv con dichas enfermedades.. Ahora había que buscar qué componente nos ofrecía Spacy [4] para poder detectarlas.\nVale aclarar que tanto en IA² como en este prototipo para CIECTI, usamos Spacy por su capacidad en el desarrollo de modelos para producción, la performance que ofrece, la robustez y por las libertades que ofrece su calidad de Open Source.\nLos modelos pre-entrenados ofrecidos por SpaCy ofrecen una razonable relación costo/beneficio, entiéndase costo como costo computacional de entrenar modelos y beneficio como precisión de predicción del modelo.\nDicho esto, en la búsqueda de un componente, encontramos que el que más se le “acercaba” era el PhraseMatcher [5]. Este componente de Spacy permite hacer coincidir eficazmente grandes listas de terminología; acepta patrones de coincidencia en forma de objetos Doc [6].\nEl problema es que sólo sirve si lo que buscas (una EPoF en este caso) aparece exactamente como fue escrito en el texto, es decir, no puede haber nada diferente (mucho menos un error al escribirlo o una abreviación que no fue considerada en el listado de EPoF).\n¿Alguna vez vieron a personal de la salud escribiendo una historia clínica? Tal vez no directamente, pero seguro estaban frente a una persona que escribía rápido en una computadora y al mismo tiempo les hacía preguntas, lo cual levanta sospechas sobre la existencia de algún error de tipeo, abreviaciones y vaya a saber cuántas otras particularidades en lo que escribió.\nPor esa razón es que es necesario incorporar “algo” que permita cierta flexibilidad sobre lo que se busca, luego de buscar alternativas… [7]</p>\n<h2>Houston tenemos un problema, o no!</h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/06341/phruzz-matcher-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.400000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVQI12XFwWrCMACA4T6iu+w51GpXkFIpePCkBw+CMNh5eBjsMHCCOPYKggfbaJo0JinUzCaWmCgKnvbBz+88P9XaLXfx9f4xfRvNJ+Pla/9zFk1/xoPvXm8YdLtBGHWCMAgjz+80XK/Z8pttv+56DffFWf3OwHolZHUQf8fiqJW2VXXRlTans9HWGGvM5R+tz9ZaR6kTZyxJku0WxCDeJHEMANjt0hQjhCGEKYSEZDznjPGc5zjDKUIYYSGEI5UqDgXZ7ymlGSGUUsZulWWp7qSSd489SCmvJLTIm0eMkwgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/e922d/phruzz-matcher-02.webp 375w,\n/static/ecab26bd03a6c2fbc6d907cfb4e8b563/2bf0f/phruzz-matcher-02.webp 512w\"\n              sizes=\"(max-width: 512px) 100vw, 512px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/ae393/phruzz-matcher-02.png 375w,\n/static/ecab26bd03a6c2fbc6d907cfb4e8b563/06341/phruzz-matcher-02.png 512w\"\n            sizes=\"(max-width: 512px) 100vw, 512px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ecab26bd03a6c2fbc6d907cfb4e8b563/06341/phruzz-matcher-02.png\"\n            alt=\"issue-spacy\"\n            title=\"issue-spacy\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">issue-spacy</figcaption>\n  </figure></p>\n<p>Por fortuna el problema rápidamente desapareció, ¡apareció RapidFuzz! [8] Una librería de matcheo rápido de cadenas de caracteres (strings). Utiliza la distancia de Levenshtein [9] para calcular las diferencias entre secuencias de una manera sencilla y es más rápida que su competidora directa FuzzyWuzzy [10] (ver benchmark [11]).\nConsiderando que las EPoF se toman de un archivo csv que fue generado a partir de información encontrada en internet, pero no considera las diversas formas en las que las personas pueden referirse a ellas.\nFinalmente se agregó esta librería para poder detectar casos en los que no haya una coincidencia perfecta entre tokens [12] y las enfermedades del listado de EPoF.\nPero no todo es tan simple o perfecto, la forma de evaluar la coincidencia es mediante la comparación de la “distancia” que separa a la EPoF y el fragmento de la HCE analizado con un porcentaje de “flexibilidad / tolerancia” configurado por nosotrxs.\nCuanto menor se configure el valor de ese porcentaje de tolerancia, mayor será la tolerancia que tenga el componente para detectar EPoF; hay que ser conscientes de que un valor demasiado bajo puede hacer que se encuentren muchas posibles coincidencias que deriven en un sobreprocesamiento para identificar dichas enfermedades.\nEl código que implementa lo comentado se extrajo a un componente separado para que pudiera ser utilizado por quien lo necesite (ver el Github del componente [13] y el componente en Pypi [14]), así como para poder publicarlo en el universo de Spacy [15].</p>\n<h2>Conclusiones</h2>\n<p>Tanto el PhraseMatcher de Spacy como RapidFuzz son de mucha utilidad pero deben ser acompañados con un adecuado análisis alineado con los objetivos establecidos. Un uso erróneo de estos componentes podría dar lugar a la generación de gran cantidad de “falsos positivos” (detecciones de entidades donde en realidad no hay una entidad).\nLo cual puede no ser un problema, siempre y cuando no perjudique a la lectura de una historia clínica o imposibilite comprender lo que intenta transmitir.\nSugerimos analizar la forma en que las personas escriben para poder enriquecer la lista de EPoF, así como cualquier otro elemento del código que haya sido creado en base a los textos que se pudieron analizar (por ejemplo, encontramos que escribieron “tto” para referirse a “tratamiento”).\nEl código del prototipo realizado para CIECTI se puede encontrar en el GitHub del proyecto [16].</p>\n<h2>Fuentes y referencias</h2>\n<p>0: <a href=\"https://www.ia2.coop/\">IA²</a><br/>\n1: <a href=\"http://www.ciecti.org.ar/\">CIECTI | Centro Interdisciplinario de Estudios en Ciencia, Tecnología e Innovación</a><br/>\n2: <a href=\"https://www.argentina.gob.ar/salud/pocofrecuentes/listado\">Listado de enfermedades poco frecuentes en Argentina</a><br/>\n3: <a href=\"https://es.wikipedia.org/wiki/Web_scraping\">Web scraping</a><br/>\n4: <a href=\"https://spacy.io/usage/processing-pipelines\">Language Processing Pipelines · spaCy Usage Documentation</a><br/>\n5: <a href=\"https://spacy.io/api/phrasematcher\">PhraseMatcher · spaCy API Documentation</a><br/>\n6: <a href=\"https://spacy.io/api/doc\">Doc · spaCy API Documentation</a><br/>\n7: <a href=\"https://support.prodi.gy/t/fuzzy-partial-matching-with-phrasematcher-ner-task/1084/8\">Fuzzy (partial) matching with PhraseMatcher (NER task) - usage</a><br/>\n8: <a href=\"https://github.com/maxbachmann/RapidFuzz\">https://github.com/maxbachmann/RapidFuzz</a><br/>\n9: <a href=\"https://es.wikipedia.org/wiki/Distancia_de_Levenshtein\">Distancia de Levenshtein</a><br/>\n10: <a href=\"https://github.com/seatgeek/fuzzywuzzy\">https://github.com/seatgeek/fuzzywuzzy</a><br/>\n11: <a href=\"https://github.com/maxbachmann/RapidFuzz#benchmark\">maxbachmann/RapidFuzz: Rapid fuzzy string matching in Python using various string metrics</a><br/>\n12: Un token es una instancia de una secuencia de caracteres en algún documento concreto que se agrupa como una unidad semántica útil para el procesamiento. Entonces al decir “token” nos referimos a una palabra, signo de puntuación, espacio, etc.<br/>\n13: <a href=\"https://github.com/mjvallone/phruzz-matcher\">https://github.com/mjvallone/phruzz-matcher</a><br/>\n14: <a href=\"https://pypi.org/project/phruzz-matcher/\">https://pypi.org/project/phruzz-matcher/</a><br/>\n15: <a href=\"https://spacy.io/universe/project/phruzz_matcher\">https://spacy.io/universe/project/phruzz_matcher</a><br/>\n16: <a href=\"https://github.com/instituciones-abiertas/anonimizacion-texto-libre\">https://github.com/instituciones-abiertas/anonimizacion-texto-libre</a><br/>\n16: <a href=\"https://github.com/instituciones-abiertas/anonimizacion-texto-libre\">https://github.com/instituciones-abiertas/anonimizacion-texto-libre</a><br/></p>","frontmatter":{"lang":"es","type":"post","title":"PhruzzMatcher","author":"Martín Vallone","slug":"/phruzz-matcher","date":"2021-10-05","tags":["spacy","pln","ner"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABxoc4EBL/xAAXEAEBAQEAAAAAAAAAAAAAAAAAARBB/9oACAEBAAEFAuLkV//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAAAARAxESFB/9oACAEBAAE/IcbHVB0y0P/aAAwDAQACAAMAAAAQo+//xAAXEQADAQAAAAAAAAAAAAAAAAAAASEx/9oACAEDAQE/EEgsP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ECf/xAAdEAACAgEFAAAAAAAAAAAAAAAAARFxITFBUWGx/9oACAEBAAE/EIS1AtrgVpqhsdeDNQ6RqVH/2Q==","aspectRatio":1.5037593984962405,"src":"/static/0e5d05dfa990a81fcb36d03f74a777ba/14b42/matrix-header.jpg","srcSet":"/static/0e5d05dfa990a81fcb36d03f74a777ba/f836f/matrix-header.jpg 200w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/2244e/matrix-header.jpg 400w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/14b42/matrix-header.jpg 800w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/47498/matrix-header.jpg 1200w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/0e329/matrix-header.jpg 1600w,\n/static/0e5d05dfa990a81fcb36d03f74a777ba/c128d/matrix-header.jpg 5760w","sizes":"(max-width: 800px) 100vw, 800px"}}},"imageCredits":"unsplash"},"timeToRead":5}}]}},"pageContext":{"slug":"/phruzz-matcher","language":"en","intl":{"language":"en","languages":["es","en"],"messages":{"Home":"Home","Servicios":"Services","Cultura":"Culture","Labs":"Labs","Blog":"Blog","Articles":"Articles","footer.designby":"Intercooperative work made by","footer.coopName":"el maizal and nayra","footer.coopName1":"el maizal","footer.coopName2":"nayra","footer.coopName1Path":"https://elmaizal.coop.ar","footer.coopName2Path":"https://nayra.coop/en","footer.preposition":"and","footer.disclaimer":"Unless stated otherwise, content on this site is licensed under ","footer.licenseName":"Creative Commons Attribution","footer.licenseIconAlt":"Creative Commons Attribution logo","header.logoAlt":"logo Fiqus","header.iconTogglerAlt":"icon to open menu","header.iconTogglerCloseAlt":"icon to close menu","homepage.title":"Homepage","homepage.imageAlt":" ","homepage.imageAltMobile":" ","homepage.leadLine1":"We are a ","homepage.leadUnderlined":"software cooperative ","homepage.leadLine2":"We are ","homepage.leadBold":"collective construction","homepage.leadLine3":", culture and minds in constant motion.","homepageCulture.title":"Culture","homepageCulture.birdImage":"bird.svg","homepageCulture.birdImageAlt":"illustration of a bird","homepageCulture.image":"homepageCulture.svg","homepageCulture.imageAlt":"illustration depicting the culture section","homepageCulture.descriptionLine1":"We have a superpower: We own the company we work for! Fiqus is not just another job, it's a ","homepageCulture.underlinedText":"life project","homepageCulture.descriptionLine2":" In which we have built a consolidated team of professionals who are in continuous training to be able to provide high quality technical solutions.","homepageCulture.btnText":"view more","homepageLabs.title":"Labs","homepageLabs.subtitle":"We train permanently!","homepageLabs.image":"homepageLabs.svg","homepageLabs.imageAlt":"illustration representing the culture section","homepageLabs.imageAltMobile":"illustration representing the culture section","homepageLabs.descriptionLine1":"One of the objectives of Fiqus is to constantly train ourselves to specialize in cutting-edge technologies, that's why every week we have","homepageLabs.descriptionBold1":" FiqusLabs","homepageLabs.descriptionLine2":"  a hands-on learning space where we investigate cutting-edge technologies such as","homepageLabs.descriptionBold2":" Elixir","homepageLabs.descriptionComma":",","homepageLabs.descriptionBold3":" Erlang","homepageLabs.descriptionLine4":" and","homepageLabs.descriptionBold4":" MachineLearning","homepageLabs.descriptionDot":".","homepageLabs.btnText":"view more","button.verMas":"view more","button.send":"send","button.read":"read","verMasArticulos":"view all articles","y":" and ","contactForm.title":"Contact us","contactForm.nameField":"Name","contactForm.emailField":"E-mail","contactForm.requiredFieldError":"Please complete the required field","contactForm.textAreaField":"Message","contactForm.messageSent":"Your message has been sent.","contactForm.thankYou":"Thank you for contacting us","contactForm.email":"info@fiqus.coop","contactForm.sedes":"Locations","contactForm.office1":"14 de Julio 1268 Ciudad de Buenos Aires, Argentina","contactForm.office2":"Las Frutillas 109, Casa 2 Villa La Angostura, Neuquén, Argentina","services.title":"Services","services.tagsTitle":"Technologies","services.btnText":"go to services","service_datos.service":"Data Science","service_datos.description":"This area is dedicated to the cleaning, extraction and analysis of data in order to feed Artificial Intelligence or Machine Learning processes. It is essential to process the data in order to make it easy to understand, as well as its use to reach the proposed goals.","service_datos.tags.0":"Python","service_datos.tags.1":"Pandas","service_datos.tags.2":"Numpy","service_datos.tags.3":"Seaborn","service_datos.image":"data","service_datos.link":" ","service_inteligenciaArtificial.service":"Artificial Intelligence","service_inteligenciaArtificial.description":"Machine Learning is a subfield of Artificial Intelligence in which the goal is for computers to learn. From collected and processed data, we design, build and train models that allow us to predict future events, classify images, recognize entities in text and much more.","service_inteligenciaArtificial.tags.0":"Python","service_inteligenciaArtificial.tags.1":"Pandas","service_inteligenciaArtificial.tags.2":"Numpy","service_inteligenciaArtificial.tags.3":"Seaborn","service_inteligenciaArtificial.image":"inteligenciaArtificial","service_inteligenciaArtificial.link":" ","service_altaConcurrencia.service":"High Concurrence","service_altaConcurrencia.description":"We use functional programming languages in real time and widely adopted in the market, which support very high levels of concurrency and distribution, producing systems that provide high speed response to high demands.","service_altaConcurrencia.tags.0":"Earlang","service_altaConcurrencia.tags.1":"Elixir","service_altaConcurrencia.tags.2":"Phoenix Framework","service_altaConcurrencia.tags.3":"LiveView","service_altaConcurrencia.image":"altaConcurrencia","service_altaConcurrencia.link":" ","service_blockchain.service":"Blockchain | Fintech","service_blockchain.description":"We are developing fintech, which are new applications, processes, products or business models in the financial services industry composed of one or more complementary financial services that are offered to the public through the Internet.","service_blockchain.tags.0":"Python","service_blockchain.tags.1":"Ethereum","service_blockchain.image":"blockchain","service_blockchain.link":" ","service_fullstack.service":"Fullstack","service_fullstack.description":"We develop web/mobile/desktop applications with different technologies to solve problems of organizations, cooperatives and companies in order to improve the efficiency of their processes.","service_fullstack.tags.0":"Django","service_fullstack.tags.1":"Phoenix","service_fullstack.tags.2":"Phoenix LiveView","service_fullstack.tags.3":"ReactJS","service_fullstack.tags.4":"VueJS","service_fullstack.tags.5":"React Native","service_fullstack.image":"fullstack","service_fullstack.link":" ","service_subsection.title":"Training","service_subsection.description":"We provide technical and/or cooperative training for organizations, cooperatives and companies in which we seek to share in a friendly and systematized way the knowledge obtained in the technological and cooperative fields.","service_subsection.image":"capacitacion","service_subsection.featuredServiceImageAlt":"Training animated image","service_subsection.link":"servicios/#capacitacion","culture.title":"Culture","culture.subtitle":"We have a superpower: We own the company we work for!","culture.description":"Fiqus is not just another job, it is a life project, in which we have built a consolidated team of professionals who are in continuous training to provide high quality technical solutions.","culture_historia.title":"History","culture_historia.imageMobile":"equipoMobile","culture_historia.imageAltMobile":"equipo Fiqus","culture_historia.imageDesktop":"equipoDesktop","culture_historia.imageAlt":"Fiqus team","culture_historia.content_line1":"Fiqus is like a big family, which started when several engineering students from the National Technological University got tired of traditional jobs and began to think of their own construction, based on different production approaches to those of the companies they had previously worked for","culture_historia.content_line2":"After several months of preparation, the idea of building something self-managed, horizontal, democratic and collectively owned became stronger and stronger. That is how the idea of building a social enterprise was born, that is how Fiqus was born.","culture_historia.content_line3":"Over the years, we have built an organizational structure that adapts to people and not the other way around. This is how, as we went along and based on the experience acquired, we built a series of agreements that today are part of our internal regulations. Our rules and regulations are not static, they are living things that evolve according to the evolution of the people who are part of our organization. This is where we reflect our concrete proposals to ensure that the people who participate in the collective are placed at the center of the production processes.","culture_historia.content_line4":"We like to think that Fiqus is a proposal that invites those who are not familiar with technological cooperativism to see that a paradigm shift is possible.","culture_historia.subtitle":"We are organized horizontally and democratically!","culture_historia.content_line5":"The decisions of the cooperative are made at the Ordinary General Assembly once a year. In addition, as a collective organization, twice a year we hold a meeting where we think, based on our personal desires, about our objectives as a cooperative and we meet weekly (virtually) to plan the daily tasks. ","culture_federales.title1":"We operate at federal level!","culture_federales.image":"mapa_argentina","culture_federales.imageAlt":" ","culture_federales.content1":"Our current distribution is the result of having created a structure malleable enough to be able to adapt to people's needs. In this way, as we have grown as people and as we have gone through the different scenarios that life has presented us with, we have prioritized accompanying the collective by providing the necessary support so that everyone can decide, for example, where and how to live.","culture_federales.tenemosSedes":"We currently have offices in ","culture_federales.y":"and","culture_federales.personasAsociadas":"But in addition, we have associates working from ","culture_federales.title2":"Territorial","culture_federales.content2":"As a worker cooperative, we understand ourselves as territorial social actors. Based on the seventh cooperative principle of 'Commitment to the Community', we assume the responsibility of extending the collective construction that we carry out day by day within the cooperative in the territory belonging to one of our locations. That is why we work actively in the Associativism Board of Villa La Angostura, Neuquén. There we meet periodically together with other actors of the social economy as well as with individuals committed to the local community to develop projects that enhance local initiatives, always with a collaborative and horizontal approach.","culture_facttic.title":"We are FACTTIC members!","culture_facttic.subtitle":"The federation is a national organization made up of technology cooperatives from all over Argentina.","culture_facttic.content_line1_part1":"It all started when the first cooperatives in the sector began to get in touch with each other because we understood that there is strength in unity to build a model that can scale with the goal of gradually becoming a real alternative to the traditional production model. As a result of these first interactions, the idea of signing a letter of commitment was born to found the ","culture_facttic.content_line1_facttic":"Argentine Federation of Technology, Innovation and Knowledge Cooperatives (FACTTIC)","culture_facttic.content_line1_part2":", a space for collective construction that fosters solidarity and collaboration as the driving forces behind the creation of technology with cooperative values.","culture_facttic.content_line2":"The continuous interaction with other cooperatives in our sector and the joint work to develop common strategies and share knowledge generates a continuously evolving virtuous circle that drives us to grow and continue to strengthen our work.","culture_facttic.content_line3":"The federation allows us to be in contact with other realities, allows us to break with the endogamy of our organization and invites us to think of ourselves as something bigger, covering a larger scale. It is a space of collective creation where imagination applied to collaborative construction finds no limits.","culture_internacional.title":"International","culture_internacional.content_line1":"Several years after participating in the creation of the federation, we began to contact technology cooperatives in other parts of the world with the objective of sharing the collaboration and intercooperation model built with local cooperatives on a more global scale.","culture_internacional.content_line2":"After several interactions, we made our network's first international inter-cooperative trip. We traveled to the United Kingdom to meet technology cooperatives from a local network. We shared experiences and began to build the foundations of what is now the Global Community of Technology Worker Cooperatives.","culture_internacional.content_line3":"The network brings together more than 50 technology cooperatives from around the world, with presence in 16 countries from three different continents. We share weekly meetings where we learn about our cultures, discuss our common goals and outline a roadmap to grow the community that composes it. Little by little, we begin to intercooperate with the objective of strengthening our local constructions with a global scale. In this way, organized, technology cooperatives will be able to help each other through cooperation to sell and develop projects together.","labs.title":"Labs","labs.subtitle":"FiqusLabs is a space where we research new technologies and train ourselves.","labs.content":"In addition, learning a new technology often comes with the ability to implement a project that benefits the community or the cooperative environment.","casos_de_exito.title":"Case Studies","casos_de_exito.tagsTitle":"Researched Technologies","casos_de_exito.imageAltLine1":"project image","casos_de_exito.btnTextVerMas":"view more","casos_de_exito.btnTextGithub":"go to Github","blog.title":"Blog","blogPost.tagsTitle":"Related tags","blogPost.relatesPost":"Related articles","blogPost.verTodosBtn":"See all articles","page404.title":"Error 404","page404.descriptionLine1":"We couldn't find what you were looking for. If you need help, please contact us.","page404.descriptionLine2":"We invite you to continue browsing our site by clicking on the following button","page404.btnText":"go back to home","page404.btnHref":"/","page404.imageAlt":"illustration fiqus tree","page404.imageAltMobile":"illustration fiqus tree"},"routed":true,"originalPath":"/post/phruzz-matcher","redirect":true,"redirectDefaultLanguageToRoot":false,"defaultLanguage":"es","fallbackLanguage":"es","ignoredPaths":[]}}},
    "staticQueryHashes": ["632761789"]}